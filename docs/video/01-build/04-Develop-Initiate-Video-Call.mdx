---
id: docs-video-develop-initiate-video-call
title: Initiate Video Call
hide_title: true
slug: ./initiate-video-call
displayed_sidebar: pushVideoSidebar
sidebar_position: 4
image: "/assets/docs/previews/docs_video_develop--initiate_video_call.png"
---

# Initiate video call overview

This section covers everything you need to do to request video calls, handle incoming video calls, establish connection and how to disconnect.

<head>
  <title>Initiate Video Call | Push Video | Push Documentation</title>
</head>

import { ABlock } from "@site/src/css/SharedStyling";

## Fire a Request for a Video Call

We are now ready to request/initiate a video call. As the name suggests, this will be done on the initiator's end.

```typescript
// aliceVideoCall.request(recipients[], options?);
await aliceVideoCall.request(
  recipients: string[],
  options?: {
    rules: {
      access: {
        type: string;
        data: {
          chatId?: string;
        };
      };
    };
  });
```

| Property   | Description                                                                        |
| ---------- | ---------------------------------------------------------------------------------- |
| recipients | Wallet address or addresses of the recipient(s)                                    |
| chatId     | Unique identifier for every push chat, here, the one between the alice and the bob |
| type       | Identifier for Push Video or Space                                                 |

<ABlock
  href="https://www.npmjs.com/package/@pushprotocol/restapi#request"
  title="NPM example of Push Video Request API"
  target="_blank"
>
  Request API Example
</ABlock>

## Accept a Request for a Video Call

### Receiving a request in sockets

In order to receive a video call request, we need to listen for the `RequestVideo` event from the stream API and use the following code inside of the event listener:

```typescript
  // Listen to incoming messages using the Stream API
  import { CONSTANTS, VideoEventType } from "@pushprotocol/restapi";
  const stream = await userAlice.initStream([CONSTANTS.STREAM.VIDEO], {
    filter?: {
      channels?: ['*'], // pass in specific channels to only listen to those
      chats?: ['*'], // pass in specific chat ids to only listen to those
    },
    connection?: {
      retries?: 3, // number of retries in case of error
    },
    raw?: false // enable true to show all data
  })

  // To listen to real-time video calls
 stream.on(CONSTANTS.STREAM.VIDEO, async (data: VideoEvent) => {
  // Handle incoming call, when the type is RequestVideo
  if (data.event === VideoEventType.RequestVideo) {
    const { peerInfo } = data;

    // peerInfo = {
    //   address: string;
    //   signal: any;
    //   meta: {
    //     rules: VideoNotificationRules;
    //   };
    // };

    aliceVideoCall.setData((oldData) => {
      return produce(oldData, (draft) => {
        draft.peerInfo = peerInfo;
      });
    });
  }
 });

```

| Property | Description                                                            |
| -------- | ---------------------------------------------------------------------- |
| address  | Wallet address of the peer                                             |
| signal   | WebRTC signal data received from the peer which sent this notification |

### Accepting the Request

After receiving a request for a video call, you can show a sort of incoming call UI. Now it's time to accept the request for a video call on the receiver's end. For this, we'll need the `signal` we received from the event handler of the `RequestVideo` event above.

```typescript
// aliceVideoCall.approve(peerInfo: VideoPeerInfo);
await aliceVideoCall.approve(data.peerInfo);
```

<ABlock
  href="https://www.npmjs.com/package/@pushprotocol/restapi#acceptrequest"
  title="NPM example of Push Video Accept Request API"
  target="_blank"
>
  Accept Request API Example
</ABlock>

## Connect a video call

Now, to finally connect a video call on the initiator's end, we need to listen for the `ApproveVideo` event from the stream API and use the following code inside of the event listener:

```typescript
  // Listen to incoming messages using the Stream API
  import { CONSTANTS, VideoEventType } from "@pushprotocol/restapi";
  const stream = await userAlice.initStream([CONSTANTS.STREAM.VIDEO], {
    filter?: {
      channels?: ['*'], // pass in specific channels to only listen to those
      chats?: ['*'], // pass in specific chat ids to only listen to those
    },
    connection?: {
      retries?: 3, // number of retries in case of error
    },
    raw?: false // enable true to show all data
  })

  // To listen to real-time video calls
 stream.on(CONSTANTS.STREAM.VIDEO, async (data: VideoEvent) => {

  // If the received status is ApproveVideo that means we can connect the video call
  if(data.event === VideoEventType.ApproveVideo){
    const { peerInfo } = data;

    // peerInfo = {
    //   address: string;
    //   signal: any;
    //   meta: {
    //     rules: VideoNotificationRules;
    //   };
    // };

    // connecting the call using received peerInfo
    await aliceVideoCall.connect(peerInfo);
  }
 });
```

<ABlock
  href="https://www.npmjs.com/package/@pushprotocol/restapi#connect"
  title="NPM example of Push Video Connect API"
  target="_blank"
>
  Connect API Example
</ABlock>

## Disconnect a video call

To disconnect a call, we use the `disconnect()` method on the aliceVideoCall.

```typescript
await aliceVideoCall.disconnect(peerAddress);
```

| Property    | Description                                   |
| ----------- | --------------------------------------------- |
| peerAddress | The address you want disconnect the call with |

And add this to the event handler of the `DenyVideo` event from stream API:

```typescript
  // Listen to incoming messages using the Stream API
  import { CONSTANTS, VideoEventType } from "@pushprotocol/restapi";
  const stream = await userAlice.initStream([CONSTANTS.STREAM.VIDEO], {
    filter?: {
      channels?: ['*'], // pass in specific channels to only listen to those
      chats?: ['*'], // pass in specific chat ids to only listen to those
    },
    connection?: {
      retries?: 3, // number of retries in case of error
    },
    raw?: false // enable true to show all data
  })

  // To listen to real-time video calls
 stream.on(CONSTANTS.STREAM.VIDEO, async (data: VideoEvent) => {

 // If the received status is DisconnectVideo that means the call has ended
  if(data.event === VideoEventType.DisconnectVideo){
    // here you can update the UI with a toast or something that the call is disconnected
  }
 });

```

<ABlock
  href="https://www.npmjs.com/package/@pushprotocol/restapi#disconnect"
  title="NPM example of Push Video Disconnect API"
  target="_blank"
>
  Disconnect API Example
</ABlock>

```

```
